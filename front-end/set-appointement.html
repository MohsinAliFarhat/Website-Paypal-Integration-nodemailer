<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, shrink-to-fit=no"
    />
    <title>Home - Brand</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Raleway:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Lora:400,400i,700,700i"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link rel="stylesheet" href="assets/fonts/fontawesome5-overrides.min.css" />
    <link rel="stylesheet" href="assets/css/styles.min.css" />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"
    />
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
  </head>

  <body
    style="
      background: linear-gradient(rgba(0, 0, 0, 0.65), rgba(47, 23, 15, 0.65)),
        url('assets/img/bg.jpg');
    "
  >
    <img
      src="GILLZ LOGO.png"
      style="display: block; margin-left: auto; margin-right: auto; width: 35%"
    />
    <nav
      class="navbar navbar-light navbar-expand-lg bg-dark py-lg-4"
      id="mainNav"
    >
      <div class="container">
        <nav
          class="navbar navbar-light navbar-expand-md"
          style="
            margin-top: -14px;
            margin-bottom: -14px;
            padding-right: 5px;
            padding-left: 50px;
          "
        >
          <div class="container-fluid">
            <a
              class="navbar-brand"
              href="index.html"
              style="font-size: 22px; color: rgba(255, 255, 255, 0.7)"
              ><strong>Home</strong></a
            ><button
              data-toggle="collapse"
              class="navbar-toggler"
              data-target="#navcol-1"
            >
              <span class="sr-only">Toggle navigation</span
              ><span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navcol-1">
              <ul class="nav navbar-nav">
                <li class="nav-item dropdown" id="1-columna">
                  <a
                    class="dropdown-toggle nav-link"
                    data-toggle="dropdown"
                    aria-expanded="false"
                    href="#"
                    >Immigration informaton</a
                  >
                  <div
                    class="dropdown-menu"
                    style="background-color: rgb(255, 255, 255)"
                  >
                    <a class="dropdown-item" href="info.html#sponsorship"
                      >Sponsorship (Spouse/family)</a
                    ><a class="dropdown-item" href="info.html#business"
                      >Business immigration</a
                    ><a class="dropdown-item" href="info.html#quebec"
                      >Quebec Skilled worker</a
                    ><a class="dropdown-item" href="info.html#pnp"
                      >Provincial Nominee Program (PNP)</a
                    ><a class="dropdown-item" href="info.html#student"
                      >Student Permit</a
                    ><a class="dropdown-item" href="info.html#work"
                      >Work Permit</a
                    ><a class="dropdown-item" href="info.html#post"
                      >Settlement/Post immigration</a
                    ><a class="dropdown-item" href="info.html#citizenship"
                      >Citizenship Application</a
                    ><a class="dropdown-item" href="info.html#permanent"
                      >Permanent Residency Application</a
                    >
                  </div>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="index.html#links">Quick links</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="faq.html#faq">Faq</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="index.html#contact">COntact</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="about.html#about">about us</a>
                </li>
              </ul>
            </div>
          </div>
        </nav>
      </div>
    </nav>

    <div id="admin-access">
      <label for="email-admin">Email</label>
      <input type="email" id="email-admin" placeholder="Enter Email"/>
      <br>
      <label for="password">Password</label>
      <input type="password" id="password" placeholder="Enter Password"/>
      <br>
      <button id="showAppointements">Set Appointement time</button>
    </div>

    <table
      id="example"
      class="display"
      style="width: 100%; background-color: #ffffff; display: none"
    >
      <thead>
        <tr>
          <th>Date</th>
          <th>Available From</th>
          <th>Available To</th>
          <th>Available</th>
        </tr>
      </thead>
      <tbody id="appointements-table"></tbody>
      <tfoot>
        <tr>
          <th>Date</th>
          <th>Available From</th>
          <th>Available To</th>
          <th>Available</th>
        </tr>
      </tfoot>
    </table>
    <div id="confirm-appointement">
      <form>
        <div class="form-group">
          <h1 class="text-center" style="padding-top: 10px; margin-left: -30%">
            CONTACT US
          </h1>
        </div>
        <div class="form-group">
          <input
            class="form-control"
            name="Name"
            type="text"
            placeholder="Name"
            required=""
            style="width: 330px"
          />
        </div>
        <div class="form-group">
          <input
            type="email"
            name="Email"
            style="width: 330px; height: 39px"
            required=""
            placeholder="Email"
          />
        </div>
        <div class="form-group">
          <input
            type="tel"
            name="Tel No"
            placeholder="Phone No"
            style="width: 330px; height: 38px"
            required=""
          />
        </div>
        <div class="form-group">
          <input
            type="text"
            name="Topic"
            placeholder="Subject"
            style="width: 330px; height: 38px"
            required=""
          />
        </div>
        <div class="form-group">
          <textarea
            name="Query"
            style="width: 330px"
            placeholder="Message"
            required=""
          ></textarea>
        </div>
        <div class="form-group">
          <button class="btn btn-info" type="submit" style="width: 330px">
            Submit
          </button>
        </div>
      </form>
    </div>
    <footer
      class="page-footer"
      style="
        width: auto;
        margin-top: 40px;
        margin-right: 0;
        margin-left: 0;
        margin-bottom: -50px;
        border-color: #ffffff;
        background: #ffffff;
      "
    >
      <div class="container">
        <div class="row">
          <div class="col-6 col-md-3" id="links">
            <h4 style="font-size: 18px">Quick links</h4>
            <ul class="footer-links">
              <li>
                <a href="info.html#express" style="font-size: 14px"
                  >Express entry</a
                >
              </li>
              <li>
                <a href="info.html#business" style="font-size: 14px"
                  >Business immigration</a
                >
              </li>
              <li>
                <a href="info.html" style="font-size: 14px"
                  >Settlement/Post Immigration</a
                >
              </li>
              <li>
                <a
                  href="info.html#work"
                  style="font-size: 14px; text-align: left"
                  >Work permit</a
                >
              </li>
              <li>
                <a href="info.html#permanent" style="font-size: 14px"
                  >Permanent Residency Application</a
                >
              </li>
            </ul>
          </div>
          <div class="col-6 col-md-3">
            <h4 style="font-size: 18px"></h4>
            <img
              src="assets/img/mr_gill.jpeg"
              style="width: 150px; margin-top: -40px"
            />
          </div>
          <div class="col-6 col-md-3">
            <h4 style="font-size: 18px">Take Assessment</h4>
            <ul class="footer-links">
              <li>
                <a href="assessment.html#assessment" style="font-size: 14px"
                  >Click here to take assessment</a
                >
              </li>
            </ul>
          </div>
          <div class="col-6 col-md-3" style="margin-left: -5px">
            <img
              src="assets/img/RCIC_lapel_pin_colour.png"
              style="width: 200px; text-align: right"
            /><a href="#" style="font-size: 14px; margin-top: -20px"><br /></a>
          </div>
        </div>
        <p>
          <strong
            >Gillz is a name you can rely on. Our goal is to provide the best
            immigration services.</strong
          ><br />
        </p>
        <hr />
        <div class="footer-legal">
          <div class="float-md-right region">
            <a href="#"
              ><img src="assets/img/united-states-flag.png" />Canada</a
            >
          </div>
          <div class="d-inline-block copyright">
            <p class="d-inline-block">
              Copyright Â© 2021. All rights reserved.<br />
            </p>
          </div>
          <div class="d-inline-block legal-links">
            <div class="d-inline-block item"></div>
            <div class="d-inline-block item">
              <h5>
                <a href="about.html#about" style="font-size: 10px">About us</a>
              </h5>
            </div>
            <div class="d-inline-block item">
              <h5 style="color: rgba(80, 70, 70, 0.15)">
                <a href="index.html" style="font-size: 10px">Home</a>
              </h5>
            </div>
            <div class="d-inline-block item">
              <h5>
                <a href="index.html#contact" style="font-size: 10px"
                  >Contact us</a
                >
              </h5>
            </div>
          </div>
        </div>
      </div>
    </footer>
    <div></div>

    <a
      href="https://api.whatsapp.com/send?phone=12049053131&text=I%20have%20a%20Query."
      class="float"
      target="_blank"
    >
      <i class="fa fa-whatsapp my-float"></i>
    </a>

    <button type="button" class="assbtn">
      <a href="assessment.html#assessment">Take Assessment</a>
    </button>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.3/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/script.min.js"></script>
    <script>
      $("#showAppointements").click( async function () {


      
      var isAdmin =   await verifyAdmin($("#email-admin").val(),$("#password").val());
        if(isAdmin){
          if(isAdmin=="complete"){
            return;
          }

        }else{
          alert("Wrong Credentials!")
          return;
        }

        const data = $.get(
          "immigration_details/availability",
          async function (data) {
            var d = new Date();
            var year = d.getFullYear();
            var month = d.getMonth() + 1;
            var day = d.getDate();

            var body = "";
            $("#appointements-table").empty();
            var j = 0;
            for (var i = 0; i < 21; i++) {
              if (day + 1 > 31) {
                day = 1;
                month = month + 1;
              } else {
                day = day + 1;
              }
              var from_time = "00:00:00";
              var to_time = "00:00:00";
              const match = await matchDates(
                new Date(year + `/` + month + `/` + day),
                data
              );
              var option_1 = "yes";
              var option_2 = "no";
              try {
                if (match === 0 || match) {
                  from_time = data[match].from_time;
                  to_time = data[match].to_time;
                  option_1 = data[match].available;
                  if (option_1 === "yes") {
                    option_2 = "no";
                  } else {
                    option_2 = "yes";
                  }
                }
              } catch (ex) {}
              body =
                body +
                `
            <tr>
                    <td id="date` +
                i +
                `">` +
                (new Date(year + `/` + month + `/` + day)).toString().substring(0,15) +
                `</td>
                    <td>` +
                ` <input id="from_time` +
                i +
                `" type="time" value="` +
                from_time +
                `">` +
                `</td>
                    <td>` +
                ` <input id="to_time` +
                i +
                `"type="time" value="` +
                to_time +
                `">` +
                `</td>

          <td>  ` +
                `<select name="availability" id="availability` +
                i +
                `">
              <option value="` +
                option_1 +
                `">` +
                option_1 +
                `</option>
              <option value="` +
                option_2 +
                `">` +
                option_2 +
                `</option>
            </select>
                ` +
                `   </td>

                <td>
                  <button id="update` +
                i +
                `">Update</button>
        </tr>`;
            }

            $("#example").show(1000);
            $("#appointements-table").append(body);
            $("button").click(function (event) {
              if(event.target.id==="showAppointements"){
                return;
              }
              const number = event.target.id.substr(6);
              const from_time = $("#from_time" + number).val();
              const to_time = $("#to_time" + number).val();
              const date = $("#date" + number).text();
              const availability = $("#availability" + number).val();
              const data = {
                from_time: from_time,
                to_time: to_time,
                date: date,
                available: availability,
              };
              $.post(
                "immigration_details/availability",
                data,
                function (data, status) {
                    console.log(data)
                  alert("Availability Updated");
                }
              );
            });
          }
        );
      });

      function matchDates(date, data) {
        for (var i = 0; i < data.length; i++) {
          if (date == data[i].date) {
            return i;
          }
        }
        return false;
      }


      async function verifyAdmin(email,password){
        var flag;
        if(email && password){
         await $.get(
          `immigration_details/verifyAdmin/`+email+"/"+password,
          function (data) {
             flag=data.msg
      });
        return flag;
        }else{
          alert("Please complete details")
          return "complete";
        }


    }
    </script>
  </body>
</html>
