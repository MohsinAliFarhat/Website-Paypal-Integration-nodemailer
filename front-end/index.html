<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, shrink-to-fit=no"
    />
    <title>Home - Brand</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Raleway:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Lora:400,400i,700,700i"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link rel="stylesheet" href="assets/fonts/fontawesome5-overrides.min.css" />
    <link rel="stylesheet" href="assets/css/styles.min.css" />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"
    />
  </head>

  <body
    style="
      background: linear-gradient(rgba(0, 0, 0, 0.65), rgba(47, 23, 15, 0.65)),
        url('assets/img/bg.jpg');
    "
  >
    <img
      src="GILLZ LOGO.png"
      style="display: block; margin-left: auto; margin-right: auto; width: 35%"
    />
    <nav
      class="navbar navbar-light navbar-expand-lg bg-dark py-lg-4"
      id="mainNav"
    >
      <div class="container">
        <nav
          class="navbar navbar-light navbar-expand-md"
          style="
            margin-top: -14px;
            margin-bottom: -14px;
            padding-right: 5px;
            padding-left: 50px;
          "
        >
          <div class="container-fluid">
            <a
              class="navbar-brand"
              href="index.html"
              style="font-size: 22px; color: rgba(255, 255, 255, 0.7)"
              ><strong>Home</strong></a
            ><button
              data-toggle="collapse"
              class="navbar-toggler"
              data-target="#navcol-1"
            >
              <span class="sr-only">Toggle navigation</span
              ><span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navcol-1">
              <ul class="nav navbar-nav">
                <li class="nav-item dropdown" id="1-columna">
                  <a
                    class="dropdown-toggle nav-link"
                    data-toggle="dropdown"
                    aria-expanded="false"
                    href="#"
                    >Immigration informaton</a
                  >
                  <div
                    class="dropdown-menu"
                    style="background-color: rgb(255, 255, 255)"
                  >
                    <a class="dropdown-item" href="info.html#sponsorship"
                      >Sponsorship (Spouse/family)</a
                    ><a class="dropdown-item" href="info.html#business"
                      >Business immigration</a
                    ><a class="dropdown-item" href="info.html#quebec"
                      >Quebec Skilled worker</a
                    ><a class="dropdown-item" href="info.html#pnp"
                      >Provincial Nominee Program (PNP)</a
                    ><a class="dropdown-item" href="info.html#student"
                      >Student Permit</a
                    ><a class="dropdown-item" href="info.html#work"
                      >Work Permit</a
                    ><a class="dropdown-item" href="info.html#post"
                      >Settlement/Post immigration</a
                    ><a class="dropdown-item" href="info.html#citizenship"
                      >Citizenship Application</a
                    ><a class="dropdown-item" href="info.html#permanent"
                      >Permanent Residency Application</a
                    >
                  </div>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="index.html#links">Quick links</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="faq.html#faq">Faq</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="index.html#contact">COntact</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="about.html#about">about us</a>
                </li>
              </ul>
            </div>
          </div>
        </nav>
      </div>
    </nav>
    <section class="page-section clearfix">
      <div class="container">
        <div class="intro">
          <img
            class="img-fluid intro-img mb-3 mb-lg-0 rounded"
            src="assets/img/intro.jpg"
          />
          <div
            class="intro-text left-0 text-centerfaded p-5 rounded bg-faded text-center"
          >
            <h2 class="section-heading mb-4">
              <span class="section-heading-upper">iMMIGRATION SERVICES</span
              ><span class="section-heading-lower">Worth tRYING</span>
            </h2>
            <p class="mb-3">
              <br />We cover a range of immigration services. Whether you have a
              few questions or you need an authorized representative to be with
              you from start to finish, Gillz will be there to give you a
              professional service.<br /><br />
            </p>
            <div class="mx-auto intro-button">
              <a
                class="btn btn-primary d-inline-block mx-auto btn-xl"
                role="button"
                href="#contact"
                style="background: rgb(216, 156, 81)"
                >Contact Us Today!</a
              >
            </div>
          </div>
        </div>
      </div>
    </section>
    <section class="page-section cta">
      <div class="container">
        <div class="row">
          <div class="col-xl-9 mx-auto">
            <div class="cta-inner text-center rounded">
              <h2 class="section-heading mb-4">
                <span class="section-heading-upper">Our Promise</span
                ><span class="section-heading-lower">To You</span>
              </h2>
              <p class="mb-0">
                We are dedicated to providing you with friendly service, a
                welcoming atmosphere, and above all else, our core values are an
                eye for detail, personalized service accompanied by in-time
                response, patience, transparency and knowledge sharing. If you
                are not satisfied, please let us know and we will do whatever we
                can to make things right!
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>
    <div class="features-boxed">
      <div class="container">
        <div class="intro">
          <h2 class="text-center">OUR&nbsp; SERVICES</h2>
        </div>
        <div class="row justify-content-center features">
          <div class="col-sm-6 col-md-5 col-lg-4 item">
            <div class="box">
              <i class="fa fa-map-marker icon"></i>
              <h3 class="name">Post Immigration and settlement</h3>
              <p class="description">
                A new country and culture can be difficult to adjust to and
                understand. From applying for your health cards to purchasing a
                home, if you require assistance, we will be there to guide you
                to your new surroundings.<br /><br />
              </p>
              <a class="learn-more" href="#contact">Learn more »</a>
            </div>
          </div>
          <div class="col-sm-6 col-md-5 col-lg-4 item">
            <div class="box">
              <i class="fa fa-clock-o icon"></i>
              <h3 class="name">Hourly Consultation</h3>
              <p class="description">
                If you have&nbsp;<strong>specific questions</strong>&nbsp;about
                your case or need advice on&nbsp;<strong
                  >how and where to start</strong
                >, we are here to answer your all your questions and to give you
                an in-depth look at your options. Book an appointment now.
                <br /><br />
              </p>
              <a class="learn-more" href="#contact">Learn more »</a>
            </div>
          </div>
          <div class="col-sm-6 col-md-5 col-lg-4 item">
            <div class="box">
              <i class="fa fa-list-alt icon"></i>
              <h3 class="name">Full Package</h3>
              <p class="description">
                We will be there with you from start to finish. This service
                includes everything from drawing up the blueprint, filling the
                application forms on your behalf, providing a submission letter
                and giving unlimited amount of our time to make sure everything
                is done correctly.<br />
              </p>
              <a class="learn-more" href="#contact">Learn more »</a>
            </div>
          </div>
          <div class="col-sm-6 col-md-5 col-lg-4 item">
            <div class="box">
              <i class="fa fa-leaf icon"></i>
              <h3 class="name">3 Booking Options</h3>
              <p class="description">
                Got any Questions?&nbsp; Ask our licensed expert. We got you
                covered. You can pay for 15, 30 or 60 minutes consultation and
                ask your query from our expert,<br /><br /><br /><br />
              </p>
              <a class="learn-more" href="#contact">Learn more »</a>
            </div>
          </div>
          <div class="col-sm-6 col-md-5 col-lg-4 item">
            <div class="box">
              <i class="fa fa-plane icon"></i>
              <h3 class="name">Application Review</h3>
              <p class="description">
                This could be a good option if you prefer to put together and
                send the application yourself but not before
                a&nbsp;<strong>full</strong>&nbsp;<strong
                  >review and report of your application&nbsp;</strong
                >by one of our&nbsp;<strong>licensed professionals</strong>. We
                recommend you begin the process with a consultation before
                starting.<br />
              </p>
              <a class="learn-more" href="#contact">Learn more »</a>
            </div>
          </div>
          <div class="col-sm-6 col-md-5 col-lg-4 item">
            <div class="box">
              <i class="fa fa-phone icon"></i>
              <h3 class="name">Immigration plan to become qualified</h3>
              <p class="description">
                Having second thoughts if your application is good enough or
                not? Well don't worry when we are here for you
              </p>
              <br /><br /><br /><a class="learn-more" href="#contact"
                >Learn more »</a
              >
            </div>
          </div>
        </div>
        <p></p>
        <div id="smart-button-container">
          <div style="text-align: center">
            <div style="margin-bottom: 1.25rem">
              <p><strong>Book Appointment</strong></p>
              <hr />
              <label for="name">Name</label>
              <br />
              <input type="text" id="name" style="width: 245px" />
              <br />
              <label for="email">Email</label>
              <br />
              <input type="text" id="email" style="width: 245px" />
              <br />
              <label for="date">Date</label>
              <br />
              <select name="date" id="date">
                <option>Select Date</option>
              </select>
              <br />
              <label for="">Price</label>
              <br />
              <select id="item-options">
                <option value="">Select Session Type</option>
                <option value="30 Minutes Session" price="50">
                  30 Minutes Session - 50 CAD
                </option>
                <option value="60 Minutes Session" price="100">
                  60 Minutes Session - 100 CAD
                </option>
              </select>
              <br />
              <label for="appt">Time</label>
              <br />
              <select name="" id="time">
                <option>Select Time</option>
              </select>
              <br />

              <div id="total-time-heading">
                Total Appointement time will be:
              </div>
              <div id="total-appointement-time"></div>

              <select style="visibility: hidden" id="quantitySelect"></select>
            </div>
            <div id="paypal-button-container"></div>
            <hr />
            
          </div>
        </div>
        <script
    src="https://www.paypal.com/sdk/js?client-id=AX868l7rRth1jfmgM86VSVERrrRPCV7_c-x44umHyHZW48cr-DBwSZVkafxD5JZcodmGakWW7BBvbVEn&currency=CAD">
  </script>
        <script>
          function initPayPalButton() {
            var shipping = 0;
            var itemOptions = document.querySelector(
              "#smart-button-container #item-options"
            );
            var quantity = parseInt();
            var quantitySelect = document.querySelector(
              "#smart-button-container #quantitySelect"
            );
            if (!isNaN(quantity)) {
              quantitySelect.style.visibility = "visible";
            }
            var orderDescription = "Choose session duration";
            if (orderDescription === "") {
              orderDescription = "Item";
            }
            paypal.Buttons({
                createOrder: function(data, actions) {
                    var price_total = $("#item-options option:selected").attr("price");
                  // This function sets up the details of the transaction, including the amount and line item details.
                  return actions.order.create({
                    purchase_units: [{
                      amount: {
                        value: price_total
                      }
                    }],
            application_context: {
              shipping_preference: 'NO_SHIPPING'
            }
                  });
                },
    onApprove: function(data, actions) {
      // This function captures the funds from the transaction.
      return actions.order.capture().then(function(details) {
        // This function shows a transaction success message to your buyer.
        alert('Transaction completed by ' + details.payer.name.given_name);
        bookAppointement();
      });
    }
  }).render('#paypal-button-container');
          }
          initPayPalButton();
        </script>

        <br />
        <br />
      </div>
    </div>
    <div>
      <div class="container">
        <div
          class="row"
          id="contact"
          style="padding-top: 50px; padding-bottom: 50px"
        >
          <div
            class="col-md-6"
            style="width: 600px; padding-left: 40px; background: #eef4f7"
          >
            <form action="https://formspree.io/f/mvovnagr" method="POST">
              <div class="form-group">
                <h1
                  class="text-center"
                  style="padding-top: 10px; margin-left: -30%"
                >
                  CONTACT US
                </h1>
              </div>
              <div class="form-group">
                <input
                  class="form-control"
                  name="Name"
                  type="text"
                  placeholder="Name"
                  required=""
                  style="width: 330px"
                />
              </div>
              <div class="form-group">
                <input
                  type="email"
                  name="Email"
                  style="width: 330px; height: 39px"
                  required=""
                  placeholder="Email"
                />
              </div>
              <div class="form-group">
                <input
                  type="tel"
                  name="Tel No"
                  placeholder="Phone No"
                  style="width: 330px; height: 38px"
                  required=""
                />
              </div>
              <div class="form-group">
                <input
                  type="text"
                  name="Topic"
                  placeholder="Subject"
                  style="width: 330px; height: 38px"
                  required=""
                />
              </div>
              <div class="form-group">
                <textarea
                  name="Query"
                  style="width: 330px"
                  placeholder="Message"
                  required=""
                ></textarea>
              </div>
              <div class="form-group">
                <button class="btn btn-info" type="submit" style="width: 330px">
                  Submit
                </button>
              </div>
            </form>
          </div>
          <div
            class="col-md-6"
            style="padding-left: 20px; padding-right: 20px; background: #eef4f7"
          >
            <fieldset></fieldset>
            <legend style="font-size: 26px">
              <i class="fas fa-industry"></i>&nbsp;GILLZ IMMIGRATION SERVICES
              INC.
            </legend>
            <p></p>
            <div class="table-responsive">
              <table class="table">
                <tbody>
                  <tr>
                    <td>
                      <i
                        class="fas fa-map-marker-alt"
                        style="height: 24px; width: 24px; font-size: 18px"
                      ></i>
                    </td>
                    <td style="font-size: 18px">
                      167 Atlas Cres, Winnipeg, Manitoba R2V 5B8
                    </td>
                  </tr>
                  <tr></tr>
                  <tr>
                    <td>
                      <i
                        class="fa fa-phone"
                        style="width: 24px; height: 24px; font-size: 18px"
                      ></i>
                    </td>
                    <td style="font-size: 18px">204-905-3131</td>
                  </tr>
                  <tr>
                    <td>
                      <i
                        class="fa fa-envelope"
                        style="width: 24px; height: 24px; font-size: 18px"
                      ></i>
                    </td>
                    <td style="font-size: 18px">
                      Info@gillzimmigration.com<br />
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <img src="assets/img/GILLZ%20LOGO.png" style="width: 280px" />
          </div>
        </div>
      </div>
    </div>
    <footer
      class="page-footer"
      style="
        width: auto;
        margin-top: 40px;
        margin-right: 0;
        margin-left: 0;
        margin-bottom: -50px;
        border-color: #ffffff;
        background: #ffffff;
      "
    >
      <div class="container">
        <div class="row">
          <div class="col-6 col-md-3" id="links">
            <h4 style="font-size: 18px">Quick links</h4>
            <ul class="footer-links">
              <li>
                <a href="info.html#express" style="font-size: 14px"
                  >Express entry</a
                >
              </li>
              <li>
                <a href="info.html#business" style="font-size: 14px"
                  >Business immigration</a
                >
              </li>
              <li>
                <a href="info.html" style="font-size: 14px"
                  >Settlement/Post Immigration</a
                >
              </li>
              <li>
                <a
                  href="info.html#work"
                  style="font-size: 14px; text-align: left"
                  >Work permit</a
                >
              </li>
              <li>
                <a href="info.html#permanent" style="font-size: 14px"
                  >Permanent Residency Application</a
                >
              </li>
            </ul>
          </div>
          <div class="col-6 col-md-3">
            <h4 style="font-size: 18px"></h4>
            <img
              src="assets/img/mr_gill.jpeg"
              style="width: 150px; margin-top: -40px"
            />
          </div>
          <div class="col-6 col-md-3">
            <h4 style="font-size: 18px">Take Assessment</h4>
            <ul class="footer-links">
              <li>
                <a href="assessment.html#assessment" style="font-size: 14px"
                  >Click here to take assessment</a
                >
              </li>
            </ul>
          </div>
          <div class="col-6 col-md-3" style="margin-left: -5px">
            <img
              src="assets/img/RCIC_lapel_pin_colour.png"
              style="width: 200px; text-align: right"
            /><a href="#" style="font-size: 14px; margin-top: -20px"><br /></a>
          </div>
        </div>
        <p>
          <strong
            >Gillz is a name you can rely on. Our goal is to provide the best
            immigration services.</strong
          ><br />
        </p>
        <hr />
        <div class="footer-legal">
          <div class="float-md-right region">
            <a href="#"
              ><img src="assets/img/united-states-flag.png" />Canada</a
            >
          </div>
          <div class="d-inline-block copyright">
            <p class="d-inline-block">
              Copyright © 2021. All rights reserved.<br />
            </p>
          </div>
          <div class="d-inline-block legal-links">
            <div class="d-inline-block item"></div>
            <div class="d-inline-block item">
              <h5>
                <a href="about.html#about" style="font-size: 10px">About us</a>
              </h5>
            </div>
            <div class="d-inline-block item">
              <h5 style="color: rgba(80, 70, 70, 0.15)">
                <a href="index.html" style="font-size: 10px">Home</a>
              </h5>
            </div>
            <div class="d-inline-block item">
              <h5>
                <a href="index.html#contact" style="font-size: 10px"
                  >Contact us</a
                >
              </h5>
            </div>
          </div>
        </div>
      </div>
    </footer>
    <div></div>

    <a
      href="https://api.whatsapp.com/send?phone=12049053131&text=I%20have%20a%20Query."
      class="float"
      target="_blank"
    >
      <i class="fa fa-whatsapp my-float"></i>
    </a>

    <button type="button" class="assbtn">
      <a href="assessment.html#assessment">Take Assessment</a>
    </button>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.3/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/script.min.js"></script>
  </body>

  <script>
    var slots = [];
    var second_slot_index = -1;
    $("#book-appointement").click(function () {
      if (
        $("#name").val() &&
        $("#email").val() &&
        $("#date").val() &&
        $("#time").val()
      ) {
        var one_hour_id = -1;
        var thirty_min_id = -1;
        thirty_min_id = $("#time").val();
        var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
        if ($("#time").val() == "Select time") {
          alert("Please Select time");
          return;
        } else if ($("#date").val() == "Select Date") {
          alert("Please select date");
          return;
        }
        if (regex.test($("#email").val())) {
          const data = {
            name: $("#name").val(),
            email: $("#email").val(),
            date: $("#date").val(),
            time: $("#time option:selected").text(),
            one_hour_id: parseInt(one_hour_id) + 1,
            meeting_type: $("#item-options").val(),
            thirty_min_id: parseInt(thirty_min_id) + 1,
          };

          $.post(
            "immigration_details/appointement",
            data,
            function (data, status) {
              alert("Appointement Booked Successfully");
            if ($("#item-options").val() == "30 Minutes Session") {
                $.get(
                  "/immigration_details/confirmation_email",
                  { confirmationTime: $("#time option:selected").text(),
                    email:$("#email").val(),
                    date:$("#date").val()},
                  function (data, status) {}
                );
              }
            }
          );

          if ($("#item-options").val() == "60 Minutes Session") {
            $("#time").val(slots[second_slot_index]);
            //save secnod time here
            const data = {
              name: $("#name").val(),
              email: $("#email").val(),
              date: $("#date").val(),
              time: $("#time option:selected").text(),
              one_hour_id: parseInt(one_hour_id) + 1,
              meeting_type: $("#item-options").val(),
              thirty_min_id: parseInt(thirty_min_id) + 2,
            };

            $.post(
              "immigration_details/appointement",
              data,
              function (data, status) {
                alert("Two slots booked");
                $.get(
                  "/immigration_details/confirmation_email",
                  { confirmationTime: $("#total-appointement-time").text(),
                    email:$("#email").val(),
                    date:$("#date").val()},
                  function (data, status) {}
                );
              }
            );
          }
        } else {
          alert("Wrong email format!");
        }
      } else {
        alert("Please fill all details!");
      }
    });

    function bookAppointement() {
      if (
        $("#name").val() &&
        $("#email").val() &&
        $("#date").val() &&
        $("#time").val()
      ) {
        var one_hour_id = -1;
        var thirty_min_id = -1;
        thirty_min_id = $("#time").val();
        var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
        if ($("#time").val() == "Select time") {
          alert("Please Select time");
          return;
        } else if ($("#date").val() == "Select Date") {
          alert("Please select date");
          return;
        }
        if (regex.test($("#email").val())) {
          const data = {
            name: $("#name").val(),
            email: $("#email").val(),
            date: $("#date").val(),
            time: $("#time option:selected").text(),
            one_hour_id: parseInt(one_hour_id) + 1,
            meeting_type: $("#item-options").val(),
            thirty_min_id: parseInt(thirty_min_id) + 1,
          };

          $.post(
            "immigration_details/appointement",
            data,
            function (data, status) {
              alert("Appointement Booked Successfully");
            if ($("#item-options").val() == "30 Minutes Session") {
                $.get(
                  "/immigration_details/confirmation_email",
                  { confirmationTime: $("#time option:selected").text(),
                    email:$("#email").val(),
                    date:$("#date").val()},
                  function (data, status) {}
                );
              }
            }
          );

          if ($("#item-options").val() == "60 Minutes Session") {
            $("#time").val(slots[second_slot_index]);
            //save secnod time here
            const data = {
              name: $("#name").val(),
              email: $("#email").val(),
              date: $("#date").val(),
              time: $("#time option:selected").text(),
              one_hour_id: parseInt(one_hour_id) + 1,
              meeting_type: $("#item-options").val(),
              thirty_min_id: parseInt(thirty_min_id) + 2,
            };

            $.post(
              "immigration_details/appointement",
              data,
              function (data, status) {
                alert("Two slots booked");
                $.get(
                  "/immigration_details/confirmation_email",
                  { confirmationTime: $("#total-appointement-time").text(),
                    email:$("#email").val(),
                    date:$("#date").val()},
                  function (data, status) {}
                );
              }
            );
          }
        } else {
          alert("Wrong email format!");
        }
      } else {
        alert("Please fill all details!");
      }
    }

    function datesAvailable() {
      $.get(
        "immigration_details/availability",
        async function (data) {
          await data.sort((a, b) => new Date(a.date) - new Date(b.date));
          var dateOptions = "";
          var todayDate = new Date();
          var flag = false;
          for (var i = 0; i < data.length; i++) {
            if (new Date(data[i].date) >= todayDate) {
              dateOptions =
                dateOptions +
                `
            <option value="` +
                data[i].date.substring(0, 15) +
                `">` +
                data[i].date.substring(0, 15) +
                `</option>;
            `;
            }
          }

          $("#date").append(dateOptions);
        }
      );
    }

    datesAvailable();
    var date = "";
    $("#date").change(function (event) {
      date = event.target.value;
    });
    $("#item-options").change(function (event) {
      if ($("#item-options").val() === "60 Minutes Session") {
        if ($("#date").val() == "Select Date") {
          alert("Please select date first");
        } else {
          $.get(
            "immigration_details/availability",
            async function (data) {
              var from_time = "";
              var to_time = "";

              for (var i = 0; i < data.length; i++) {
                if (data[i].date == date && data[i].available == "yes") {
                  flag = false;
                  from_time = data[i].from_time;
                  to_time = data[i].to_time;
                }
              }
              $("#time").empty();

              var one_hour_ids_booked = [];
              var thirty_mins_id_booked = [];
              await $.get(
                "immigration_details/appointements",
                function (data) {
                  var starting_id = 0;
                  for (var i = 0; i < data.length; i++) {
                    if (data[i].date == $("#date").val()) {
                      if (data[i].one_hour_id != 0) {
                        one_hour_ids_booked.push(data[i].one_hour_id);
                      }
                      if (data[i].thirty_min_id != 0) {
                        thirty_mins_id_booked.push(data[i].thirty_min_id);
                      }
                    }
                  }
                }
              );

              $.get(
                "immigration_details/thirty_mins",
                function (data) {
                  var starting_id = 0;
                  for (var i = 0; i < data.length; i++) {
                    if (data[i].from_time == from_time) {
                      starting_id = i;
                      break;
                    }
                  }

                  var time = "<option> Select time </option>";
                  slots = [];
                  for (var i = starting_id; i < data.length; i++) {
                    var one_hour_id_computed = -1;
                    if (data[i].id % 2 == 1) {
                      one_hour_id_computed = (data[i].id + 1) / 2;
                    } else {
                      one_hour_id_computed = data[i].id / 2;
                    }
                    if (one_hour_ids_booked.includes(one_hour_id_computed)) {
                      continue;
                    } else {
                      if (thirty_mins_id_booked.includes(data[i].id)) {
                        continue;
                      }

                      if (data[i].from_time != to_time) {
                        slots.push(i);
                        time =
                          time +
                          `<option value="` +
                          i +
                          `"> ` +
                          data[i].from_time +
                          " to " +
                          data[i].to_time +
                          " CT" +
                          `</option>`;
                      } else {
                        break;
                      }
                    }
                  }
                  $("#time").append(time);
                }
              );
            }
          );
        }
      } else {
        $.get(
          "immigration_details/availability",
          async function (data) {
            var from_time = "";
            var to_time = "";

            for (var i = 0; i < data.length; i++) {
              if (data[i].date == date && data[i].available == "yes") {
                flag = false;
                from_time = data[i].from_time;
                to_time = data[i].to_time;
              }
            }
            $("#time").empty();

            var one_hour_ids_booked = [];
            var thirty_mins_id_booked = [];
            await $.get(
              "immigration_details/appointements",
              function (data) {
                var starting_id = 0;
                for (var i = 0; i < data.length; i++) {
                  if (data[i].date == $("#date").val()) {
                    if (data[i].one_hour_id != 0) {
                      one_hour_ids_booked.push(data[i].one_hour_id);
                    }
                    if (data[i].thirty_min_id != 0) {
                      thirty_mins_id_booked.push(data[i].thirty_min_id);
                    }
                  }
                }
              }
            );

            $.get(
              "immigration_details/thirty_mins",
              function (data) {
                var starting_id = 0;
                for (var i = 0; i < data.length; i++) {
                  if (data[i].from_time == from_time) {
                    starting_id = i;
                    break;
                  }
                }

                var time = "<option> Select time </option>";
                for (var i = starting_id; i < data.length; i++) {
                  var one_hour_id_computed = -1;
                  if (data[i].id % 2 == 1) {
                    one_hour_id_computed = (data[i].id + 1) / 2;
                  } else {
                    one_hour_id_computed = data[i].id / 2;
                  }
                  if (one_hour_ids_booked.includes(one_hour_id_computed)) {
                    continue;
                  } else {
                    if (thirty_mins_id_booked.includes(data[i].id)) {
                      continue;
                    }

                    if (data[i].from_time != to_time) {
                      time =
                        time +
                        `<option value="` +
                        i +
                        `"> ` +
                        data[i].from_time +
                        " to " +
                        data[i].to_time +
                        " CT" +
                        `</option>`;
                    } else {
                      break;
                    }
                  }
                }
                $("#time").append(time);
              }
            );
          }
        );
      }
    });

    $("#time").change(function (event) {
      if ($("#item-options").val() == "60 Minutes Session") {
        $("#total-time-heading").show();
        if ($("#time").val() == slots[slots.length - 1]) {
          // alert("You can't select last 30 mins slot in 60 hour session!")

          $("#time").val("Select time");
        } else {
          second_slot_index = slots.indexOf(parseInt($("#time").val())) + 1;

          $("#time option").each(function () {
            $("#total-appointement-time").show();
            // Add  to your list
            if ($(this).val() == slots[second_slot_index]) {


              if (
                $("#time option:selected").text().substring(10, 15) !=
                $(this).text().substring(1, 6)
              ) {
                $("#time").val("Select time");
                               $("#total-appointement-time").text("Please select another time at this time we have only half hour appointment available")

              }
else{
              $("#total-appointement-time").text(
                "From " +
                  $("#time option:selected").text() +
                  " to " +
                  $(this).text()
              );
}
            }
          });
        }
      } else {
        $("#total-time-heading").hide();
        $("#total-appointement-time").hide();
      }
    });

    async function check_thirty_mins_availability(one_hour_id, from_time) {
      //we compare from_time thirty mins wala with from_time one_hour wala if same then skip
      var flag = true;
      await $.get(
        "immigration_details/one_hour",
        function (data) {
          for (var i = 0; i < data.length; i++) {
            if (data[i].id == one_hour_id) {
              if (
                from_time.substring(0, 2) == data[i].from_time.substring(0, 2)
              ) {
                flag = false;
              }
            }
          }
        }
      );

      return flag;
    }
  </script>
</html>
